---
title: 羊村村史馆
menu: 村史馆
---

# 羊村村史馆

欢迎来到羊村村史馆。在这里你可以详细了解到羊村的建村史，以及羊村建村使用的系统架构。

## 地理位置

羊村运行在树莓派4B之上。这块小小的单片机自2020年起投入运行，但它从一开始并不是用来建村的，而是羊村秘书[猫猫ちゃん](https://github.com/qzlzdy/Neko-Chan2.git)的私人住宅。2022年9月，村长决定在这里建立自己的村子。

这块树莓派只有`2G`内存，不过好在羊村规模不大，足够为数不多的村民提供服务了。

> 所以村长为什么只买了`2G`内存啊啊啊

## 羊村总理

羊村运行在Arch Linux ARM操作系统环境下。众所周知村长是一个激进主义者，村长想要尽可能早地使用最新的软件~~，即使村长从来不使用这些新特性~~。因此，作为滚动发行版的Arch Linux ARM被任命为了羊村的总理，负责管理树莓派的所有资源。

> 至于另一个著名的滚动发行版Gentoo
> 
> 在树莓派上从源码编译所有软件包真是太慢了！
> 
> 编译gcc甚至直接耗尽SD卡空间。

## 羊村外交体系

羊村的所有部门网站目前都由Nginx代理。但羊村所处地理环境为内网，因此除外交部外还有部署在云上的大使馆，和外包给Cloudflare的国防部。

羊村本土的外交部，通过不同的端口号实现不同部门的访问。其中，羊村广播站只能在内网通过端口号访问。

位于云上的大使馆同样由Nginx代理，仅对外开放三个端口：

- 443端口用于对外提供所有部门服务，反向代理至外交部。外交部根据请求的子域名分流至相应部门。
- 另有两个SSH端口分别是村长管理大使馆与本土机构的特殊通道。

羊村国防部当然是用来保障安全的啦。怎么保障？问Cloudflare去。

## 羊村行政体系

目前羊村有四套独立的网站框架。

- 羊村广播站使用的funkwhale平台
- 羊村客运中心和羊村村长室使用的Wt框架
- 羊村门户网站、村史馆等使用的Grav CMS
- 羊村海关总署使用的Uptime服务

funkwhale平台的静态前端直接由Nginx托管，后端则由Django框架实现。

Wt框架实现的网页通过FastCGI协议由Nginx代理。

Grav CMS由~~全世界最好的编程语言~~PHP实现，本质上就是一个轻量Markdown渲染器，通过php-fpm由Nginx代理。

羊村海关总署是另一个外包的羊村部门。Uptime监控羊村所有部门的运行情况，并在紧急情况下直接向村长发送警报。
